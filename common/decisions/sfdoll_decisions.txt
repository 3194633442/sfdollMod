#人口转化为铁血
decision_planet_pop_to_sfdoll = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = pop_to_sfdoll
	
	resources = {
		category = decisions
		cost = {
			alloys = 50
		}
	}	
	prerequisites = { tech_sf_doll_modding_1 }
	potential = {
		owner = { 
			is_regular_empire = yes 
			has_authority = auth_gf_sfdoll
		}
	}
	allow = {
		any_owned_pop = {
			NOT ={ has_trait = trait_gf_sfdoll }	
		}
	}	
	effect = {
		custom_tooltip = decision_planet_pop_to_sfdoll_effects_short
		hidden_effect = {
			save_event_target_as = planet_decision_planet_pop_to_sfdoll
			every_owned_pop = {
				limit = {
					NOT ={ has_trait = trait_gf_sfdoll }			
				}	
				owner = {
					change_variable = {
						which = count_pop_to_sfdoll
						value = 1
					}
				}
				kill_pop = yes
			}
			owner = {
				while = {
					count = count_pop_to_sfdoll
					event_target:planet_decision_planet_pop_to_sfdoll = {
						create_pop = {
							species = owner
						}
					}
				}
				clear_variable = count_pop_to_sfdoll
			}
		}		
	}
}

#居住站转化为铁血理想城
decision_build_sfdoll_habitat = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_build_sfdoll_habitat
	
	resources = {
		category = decisions
		cost = {
			alloys = 50
		}
	}	
	#prerequisites = { tech_sf_doll_modding_1 }
	potential = {
		owner = { 
			is_regular_empire = yes 
			has_authority = auth_gf_sfdoll
		}
		is_planet_class = pc_habitat
	}

	effect = {
		custom_tooltip = decision_planet_pop_to_sfdoll_effects_short
		# hidden_effect = {
		# 	save_event_target_as = planet_decision_planet_pop_to_sfdoll
		# 	every_owned_pop = {
		# 		limit = {
		# 			NOT ={ has_trait = trait_gf_sfdoll }			
		# 		}	
		# 		owner = {
		# 			change_variable = {
		# 				which = count_pop_to_sfdoll
		# 				value = 1
		# 			}
		# 		}
		# 		kill_pop = yes
		# 	}
		# 	owner = {
		# 		while = {
		# 			count = count_pop_to_sfdoll
		# 			event_target:planet_decision_planet_pop_to_sfdoll = {
		# 			create_pop = {
		# 					species = owner
		# 				}
		# 			}
		# 		}
		# 		clear_variable = count_pop_to_sfdoll
		# 	}
		# }		

		hidden_effect = {
			change_pc = pc_sfdoll_habitat
			set_planet_size = 20
		}
	}
}